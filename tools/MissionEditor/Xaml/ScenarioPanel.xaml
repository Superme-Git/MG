<?xml version="1.0" encoding="utf-8" ?>
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="Knight.MissionEditor.Xaml.ScenarioPanel"
        xmlns:src="clr-namespace:Knight.MissionEditor"
        Title="剧情编辑器"
        ShowInTaskbar="False" 
        WindowStartupLocation="CenterOwner" 
        SizeToContent="WidthAndHeight"
        xmlns:local="clr-namespace:Knight.MissionEditor.Xaml"
        ResizeMode="NoResize" Height="548" Width="742">
  <Window.Resources>
        <local:BoolToVisibilityConverter x:Key="boolToVis" />
        <Style TargetType="{x:Type TextBlock}" 
           x:Key="GridBlockStyle">
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="Visibility" 
              Value="{Binding Path=IsSelected, 
              RelativeSource={RelativeSource FindAncestor, 
                        AncestorType={x:Type ListViewItem}},
              Converter={StaticResource boolToVis}, 
                         ConverterParameter=False}" />
    </Style>
        <Style TargetType="{x:Type FrameworkElement}" 
           x:Key="GridEditStyle">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Visibility" 
              Value="{Binding Path=IsSelected, 
              RelativeSource={RelativeSource FindAncestor, 
                        AncestorType={x:Type ListViewItem}},
              Converter={StaticResource boolToVis}, 
                         ConverterParameter=True}" />
        </Style>
    </Window.Resources>

            <Grid Height="516" Width="728">
        <Label Background="Snow" 
               BorderBrush="Cyan"
               FontFamily="宋体" 
               Foreground="LightSkyBlue" 
               Height="28" 
               HorizontalAlignment="Left" 
               HorizontalContentAlignment="Center"
               VerticalAlignment="Top" 
               VerticalContentAlignment="Center" 
               Width="101">
            剧情动画
        </Label>
        <src:IntNumEditBox 
            Height="28" 
            HorizontalAlignment="Left" 
            HorizontalContentAlignment="Right"
            Margin="122,0,0,0" 
            TextAlignment="Right"
            VerticalAlignment="Top" 
            VerticalContentAlignment="Center" 
            Width="101" 
            x:Name="AnimationIDEditBox"
            />
        <Label Background="Snow" 
               BorderBrush="Cyan" 
               FontFamily="宋体" 
               Foreground="LightSkyBlue" 
               Height="28" 
               HorizontalAlignment="Left" 
               HorizontalContentAlignment="Center" 
               Margin="0,37,0,0" 
               VerticalAlignment="Top" 
               VerticalContentAlignment="Center"
               Width="101">
            对话内容
        </Label>
        <Button Height="23" HorizontalAlignment="Left" Margin="21,70,0,0" VerticalAlignment="Top" Width="61" Click="AddConversation">添加</Button>
        <Button Height="23" HorizontalAlignment="Left" Margin="21,108,0,0" VerticalAlignment="Top" Width="61" Click="ClearConversation">删除</Button>
        <Label Background="Snow" BorderBrush="Cyan" FontFamily="宋体" Foreground="LightSkyBlue" Height="28" HorizontalAlignment="Left" HorizontalContentAlignment="Center" Margin="0,142,0,0" VerticalAlignment="Top" VerticalContentAlignment="Center" Width="101">完成后对话</Label>
        <Button Height="23" HorizontalAlignment="Left" Margin="21,179,0,0" VerticalAlignment="Top" Width="61" Click="AddFinishConversation">添加</Button>
        <Button HorizontalAlignment="Left" Margin="21,213,0,0" Width="61" Height="23" VerticalAlignment="Top" Click="ClearFinishConversation">删除</Button>
        <Label Background="Snow" BorderBrush="Cyan" FontFamily="宋体" Foreground="LightSkyBlue" HorizontalAlignment="Left" HorizontalContentAlignment="Center" Margin="3,247,0,241" VerticalContentAlignment="Center" Width="98">显示Npc</Label>
        <src:IntNumEditBox HorizontalAlignment="Left" HorizontalContentAlignment="Right" Margin="122,247,0,0" TextAlignment="Right" VerticalContentAlignment="Center" Width="73" x:Name="DisPlayNpcIDEditbox" TextChanged="IDChanged" Height="28" VerticalAlignment="Top"/>
        <Label FontFamily="宋体" FontSize="13" HorizontalAlignment="Left" HorizontalContentAlignment="Center" Margin="122,0,0,200" VerticalContentAlignment="Center" Width="120" Height="28" VerticalAlignment="Bottom" Name="DisplayNpcNameLable">Label</Label>
        <TextBox AcceptsReturn="True" FontFamily="宋体" FontSize="15" Margin="251,247,10,200" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" Name="ConversationEditBox"/>
        <Label Background="Snow" BorderBrush="Cyan" FontFamily="宋体" Foreground="LightSkyBlue" Height="28" HorizontalAlignment="Left" HorizontalContentAlignment="Center" Margin="0,0,0,168" VerticalAlignment="Bottom" VerticalContentAlignment="Center" Width="101">分支对话NPC</Label>
        <src:IntNumEditBox Height="28" HorizontalAlignment="Left" HorizontalContentAlignment="Right" Margin="122,0,0,168" TextAlignment="Right" VerticalAlignment="Bottom" VerticalContentAlignment="Center" Width="73" TextChanged="NpcIDChanged" x:Name="BranchNpcIDEditBox"/>
        <Label FontFamily="宋体" FontSize="13" Height="28" HorizontalContentAlignment="Center" Margin="0,0,486,134" VerticalAlignment="Bottom" VerticalContentAlignment="Center" HorizontalAlignment="Right" Width="120" Name="HideNpcNameLable">Label</Label>
        <TextBox AcceptsReturn="True" FontFamily="宋体" FontSize="15" Height="69" Margin="251,0,10,125.578" TextWrapping="Wrap" VerticalAlignment="Bottom" VerticalScrollBarVisibility="Auto" Name="BranchConversationEditBox"/>
        <Label Background="Snow" BorderBrush="Cyan" FontFamily="宋体" Foreground="LightSkyBlue" Height="30" HorizontalAlignment="Left" HorizontalContentAlignment="Center" Margin="3,0,0,79" VerticalAlignment="Bottom" VerticalContentAlignment="Center" Width="101">选项一
        </Label>
        <TextBox AcceptsReturn="True" FontFamily="宋体" FontSize="15" Height="30" Margin="122,0,10,79" TextWrapping="Wrap" VerticalAlignment="Bottom" VerticalScrollBarVisibility="Auto" Name="BranchOptionAEditBox"/>
        <Label Background="Snow" BorderBrush="Cyan" FontFamily="宋体" Foreground="LightSkyBlue" Height="30" HorizontalAlignment="Left" HorizontalContentAlignment="Center" Margin="3,0,0,45" VerticalAlignment="Bottom" VerticalContentAlignment="Center" Width="101">选项二</Label>
        <TextBox AcceptsReturn="True" FontFamily="宋体" FontSize="15" Height="30" Margin="122,0,10,45" TextWrapping="Wrap" VerticalAlignment="Bottom" VerticalScrollBarVisibility="Auto" Name="BranchOptionBEditBox"/>
        <Label Background="Snow" BorderBrush="Cyan" FontFamily="宋体" Foreground="LightSkyBlue" Height="30" HorizontalAlignment="Left" HorizontalContentAlignment="Center" Margin="3,0,0,9" VerticalAlignment="Bottom" VerticalContentAlignment="Center" Width="101">选项三
        </Label>
        <TextBox AcceptsReturn="True" FontFamily="宋体" FontSize="15" Height="30" Margin="122,0,10,9" TextWrapping="Wrap" VerticalAlignment="Bottom" VerticalScrollBarVisibility="Auto" Name="BranchOptionCEditBox"/>
        <ListView Height="85" Margin="122,37,16,0" VerticalAlignment="Top"  Name="ConversationList">
        <ListView.View>
            <GridView>
                <GridViewColumn Width="60">
                    <GridViewColumnHeader Tag="NpcID" 
                                  Content="Npc名称" />
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <TextBlock Text="{Binding Path=NpcID}" 
                             Style="{StaticResource GridBlockStyle}"/>
                 </Grid>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>

                <GridViewColumn Width="500">
                    <GridViewColumnHeader Tag="NpcConversation" 
                                  Content="Npc对话" />
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <TextBlock Text="{Binding Path=Conversation}" 
                             Style="{StaticResource GridBlockStyle}"/>
                  <TextBox Text="{Binding Path=Conversation}" 
                           Style="{StaticResource GridEditStyle}" />
                </Grid>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
               </GridView>
            </ListView.View>
        </ListView>

        <ListView Height="85" Margin="122,142,16,0" VerticalAlignment="Top" Name="FinishConversationList">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="60">
                        <GridViewColumnHeader Tag="NpcID" 
                                  Content="Npc名称" />
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Grid>
                                    <TextBlock Text="{Binding Path=NpcID}" 
                             Style="{StaticResource GridBlockStyle}"/>
                 </Grid>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Width="500">
                        <GridViewColumnHeader Tag="NpcConversation" 
                                  Content="Npc对话" />
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Grid>
                                    <TextBlock Text="{Binding Path=Conversation}" 
                             Style="{StaticResource GridBlockStyle}"/>
                  <TextBox Text="{Binding Path=Conversation}" 
                           Style="{StaticResource GridEditStyle}" />
                </Grid>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</Window>