# MT3é¡¹ç›® - å…³é”®ä¾èµ–åº“ç¼–è¯‘è¿›åº¦ä¸è¯´æ˜

## ğŸ“… ç¼–è¯‘ä¿¡æ¯

- **ç¼–è¯‘æ—¥æœŸ**: 2025-10-12
- **ç¼–è¯‘å·¥å…·**: Visual Studio 2019 MSBuild
- **ç›®æ ‡å·¥å…·é›†**: v140 (Visual Studio 2015)
- **é…ç½®**: Release
- **å¹³å°**: Win32

## ğŸ¯ ç¼–è¯‘ç›®æ ‡åº“åˆ—è¡¨

æŒ‰ç…§ä¾èµ–å…³ç³»é¡ºåºï¼Œéœ€è¦ç¼–è¯‘ä»¥ä¸‹å…³é”®åº“ï¼š

### ç¬¬ä¸€å±‚ï¼šåŸºç¡€åº“

| åºå· | åº“å | çŠ¶æ€ | è¾“å‡ºæ–‡ä»¶ | è¯´æ˜ |
|------|------|------|----------|------|
| 1 | lua | å¾…ç¼–è¯‘ | common\lua\Release.win32\lua.lib | Luaè„šæœ¬å¼•æ“ |
| 2 | platform | å¾…ç¼–è¯‘ | common\platform\Release.win32\platform.lib | å¹³å°æŠ½è±¡å±‚ |
| 3 | ljfm | å¾…ç¼–è¯‘ | common\ljfm\Release.win32\ljfm.lib | æ–‡ä»¶ç®¡ç†åº“ |
| 4 | cauthc | å¾…ç¼–è¯‘ | common\cauthc\projects\windows\Release.win32\cauthc.lib | è®¤è¯åº“ |

### ç¬¬äºŒå±‚ï¼šUIå’Œå›¾å½¢åº“

| åºå· | åº“å | çŠ¶æ€ | è¾“å‡ºæ–‡ä»¶ | è¯´æ˜ |
|------|------|------|----------|------|
| 5 | cegui | å¾…ç¼–è¯‘ | dependencies\cegui\project\win32\Release.win32\cegui.lib | UIæ¡†æ¶ |
| 6 | freetype | å¾…ç¼–è¯‘ | dependencies\freetype-2.4.9\objs\win32\vc2010\freetype249MT.lib | å­—ä½“æ¸²æŸ“ |
| 7 | pcre | å¾…ç¼–è¯‘ | dependencies\pcre-8.31\Release.win32\pcre.lib | æ­£åˆ™è¡¨è¾¾å¼ |
| 8 | silly | å¾…ç¼–è¯‘ | dependencies\SILLY-0.1.0\Release.win32\silly.lib | å›¾åƒåŠ è½½ |

### ç¬¬ä¸‰å±‚ï¼šæ¸¸æˆå¼•æ“

| åºå· | åº“å | çŠ¶æ€ | è¾“å‡ºæ–‡ä»¶ | è¯´æ˜ |
|------|------|------|----------|------|
| 9 | cocos2d-x | å¾…ç¼–è¯‘ | cocos2d-2.0-rc2-x-2.0.1\Release.win32\libcocos2d.lib | æ¸¸æˆå¼•æ“æ ¸å¿ƒ |
| 10 | CocosDenshion | å¾…ç¼–è¯‘ | cocos2d-2.0-rc2-x-2.0.1\Release.win32\libCocosDenshion.lib | éŸ³é¢‘å¼•æ“ |
| 11 | libSpine | å¾…ç¼–è¯‘ | cocos2d-2.0-rc2-x-2.0.1\Release.win32\libSpine.lib | éª¨éª¼åŠ¨ç”» |
| 12 | engine | å¾…ç¼–è¯‘ | engine\Release.win32\engine.lib | æ¸¸æˆå¼•æ“æ‰©å±• |

### ç¬¬å››å±‚ï¼šå®¢æˆ·ç«¯åº“

| åºå· | åº“å | çŠ¶æ€ | è¾“å‡ºæ–‡ä»¶ | è¯´æ˜ |
|------|------|------|----------|------|
| 13 | FireClient | å¾…ç¼–è¯‘ | client\FireClient\Release.win32\FireClient.lib | å®¢æˆ·ç«¯åº“ |

## ğŸ”§ ç¼–è¯‘è„šæœ¬è¯´æ˜

å·²åˆ›å»ºä»¥ä¸‹ç¼–è¯‘è„šæœ¬ï¼š

### ä¸»è„šæœ¬
- **build_all_steps.bat** - æŒ‰é¡ºåºç¼–è¯‘æ‰€æœ‰å…³é”®åº“ï¼ˆæ¨èä½¿ç”¨ï¼‰

### å•æ­¥è„šæœ¬
- **build_step1_freetype.bat** - å•ç‹¬ç¼–è¯‘ FreeType
- **build_step2_lua.bat** - å•ç‹¬ç¼–è¯‘ Lua
- **build_step3_platform.bat** - å•ç‹¬ç¼–è¯‘ platform
- **build_step4_ljfm.bat** - å•ç‹¬ç¼–è¯‘ ljfm
- **build_step5_cegui.bat** - å•ç‹¬ç¼–è¯‘ CEGUI
- **build_step6_cocos2d.bat** - å•ç‹¬ç¼–è¯‘ Cocos2d-x
- **build_step7_engine.bat** - å•ç‹¬ç¼–è¯‘ engine

## ğŸ“ ä½¿ç”¨è¯´æ˜

### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨ç¼–è¯‘æ‰€æœ‰åº“ï¼ˆæ¨èï¼‰

```batch
cd E:\æ¢¦å¹»è¥¿æ¸¸MGåŸç‰ˆæºç 
build_all_steps.bat
```

### æ–¹å¼äºŒï¼šé€ä¸ªç¼–è¯‘

```batch
cd E:\æ¢¦å¹»è¥¿æ¸¸MGåŸç‰ˆæºç 

REM ç¬¬1æ­¥ï¼šç¼–è¯‘ Lua
build_step2_lua.bat

REM ç¬¬2æ­¥ï¼šç¼–è¯‘ platform
build_step3_platform.bat

REM ç¬¬3æ­¥ï¼šç¼–è¯‘ ljfm
build_step4_ljfm.bat

REM ç¬¬4æ­¥ï¼šç¼–è¯‘ CEGUI
build_step5_cegui.bat

REM ç¬¬5æ­¥ï¼šç¼–è¯‘ Cocos2d-x
build_step6_cocos2d.bat

REM ç¬¬6æ­¥ï¼šç¼–è¯‘ engine
build_step7_engine.bat
```

### æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨ä½¿ç”¨ MSBuild

```batch
set MSBUILD="C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\MSBuild.exe"

REM ç¼–è¯‘ platform
cd common\platform
%MSBUILD% platform.win32.vcxproj /t:Rebuild /p:Configuration=Release /p:Platform=Win32 /p:PlatformToolset=v140 /nologo

REM ç¼–è¯‘ ljfm
cd ..\ljfm
%MSBUILD% ljfm.win32.vcxproj /t:Rebuild /p:Configuration=Release /p:Platform=Win32 /p:PlatformToolset=v140 /nologo

REM ç¼–è¯‘ engine
cd ..\..\engine
%MSBUILD% engine.win32.vcxproj /t:Rebuild /p:Configuration=Release /p:Platform=Win32 /p:PlatformToolset=v140 /nologo
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç¼–è¯‘å‰ææ¡ä»¶

- âœ… å·²å®‰è£… Visual Studio 2019 Build Tools
- âœ… å·²å®‰è£… v140 å¹³å°å·¥å…·é›†ï¼ˆVisual Studio 2015å·¥å…·é›†ï¼‰
- âœ… å·²å®‰è£… Windows SDK 10.0
- âœ… MSBuild è·¯å¾„æ­£ç¡®: `C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\MSBuild.exe`

### 2. å¸¸è§é—®é¢˜

#### é—®é¢˜ 1: "æ‰¾ä¸åˆ° MSBuild.exe"
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ Visual Studio 2019 Build Tools æ˜¯å¦å·²å®‰è£…
- ç¡®è®¤ MSBuild.exe è·¯å¾„æ˜¯å¦æ­£ç¡®
- ä¿®æ”¹è„šæœ¬ä¸­çš„ `MSBUILD` å˜é‡ä¸ºå®é™…è·¯å¾„

#### é—®é¢˜ 2: "æ‰¾ä¸åˆ°å¹³å°å·¥å…·é›† v140"
**è§£å†³æ–¹æ¡ˆ**:
- åœ¨ Visual Studio Installer ä¸­å®‰è£… "MSVC v140 - VS 2015 C++ ç”Ÿæˆå·¥å…·"
- æˆ–è€…ä¿®æ”¹è„šæœ¬ï¼Œå°† `v140` æ”¹ä¸º `v142` (VS 2019) æˆ–å…¶ä»–å·²å®‰è£…çš„å·¥å…·é›†

#### é—®é¢˜ 3: "æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å·"
**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿æ‰€æœ‰ä¾èµ–åº“æŒ‰é¡ºåºç¼–è¯‘
- æ£€æŸ¥è¿è¡Œæ—¶åº“è®¾ç½®æ˜¯å¦ç»Ÿä¸€ä¸º `/MD`
- å‚è€ƒ [ç¬¬ä¸‰æ–¹ä¾èµ–åº“é‡æ–°ç¼–è¯‘å®Œå…¨æŒ‡å—.md](ç¬¬ä¸‰æ–¹ä¾èµ–åº“é‡æ–°ç¼–è¯‘å®Œå…¨æŒ‡å—.md)

### 3. ç¼–è¯‘é¡ºåºå¾ˆé‡è¦ï¼

å¿…é¡»æŒ‰ç…§ä»¥ä¸‹é¡ºåºç¼–è¯‘ï¼š
1. åŸºç¡€åº“ (lua, platform, ljfm, cauthc)
2. UIåº“ (cegui åŠå…¶ä¾èµ–)
3. å¼•æ“åº“ (cocos2d-x)
4. æ‰©å±•åº“ (engine)
5. å®¢æˆ·ç«¯åº“ (FireClient)

## ğŸ“Š ç¼–è¯‘æ—¶é—´ä¼°ç®—

| åº“ | é¢„è®¡æ—¶é—´ |
|------|----------|
| lua | 1-2 åˆ†é’Ÿ |
| platform | 2-3 åˆ†é’Ÿ |
| ljfm | 2-3 åˆ†é’Ÿ |
| cauthc | 1-2 åˆ†é’Ÿ |
| cegui | 3-5 åˆ†é’Ÿ |
| cocos2d-x | 10-15 åˆ†é’Ÿ |
| engine | 5-8 åˆ†é’Ÿ |
| **æ€»è®¡** | **çº¦ 30-40 åˆ†é’Ÿ** |

## ğŸ” éªŒè¯ç¼–è¯‘ç»“æœ

ç¼–è¯‘å®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š

```batch
cd E:\æ¢¦å¹»è¥¿æ¸¸MGåŸç‰ˆæºç 

REM æ£€æŸ¥å…³é”®åº“æ–‡ä»¶
dir common\platform\Release.win32\platform.lib
dir common\ljfm\Release.win32\ljfm.lib
dir engine\Release.win32\engine.lib
dir dependencies\cegui\project\win32\Release.win32\cegui.lib
dir cocos2d-2.0-rc2-x-2.0.1\Release.win32\libcocos2d.lib
```

æ‰€æœ‰åº“æ–‡ä»¶éƒ½åº”è¯¥å­˜åœ¨ä¸”å¤§å°å¤§äº 0ã€‚

## ğŸ“¦ ä¸‹ä¸€æ­¥

ä¾èµ–åº“ç¼–è¯‘å®Œæˆåï¼Œç¼–è¯‘ä¸»é¡¹ç›®ï¼š

```batch
cd client\MT3Win32App
msbuild mt3.win32.vcxproj /t:Rebuild /p:Configuration=Release /p:Platform=Win32 /p:PlatformToolset=v140 /nologo
```

å¦‚æœä¸»é¡¹ç›®ç¼–è¯‘æˆåŠŸï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä½äºï¼š
```
client\Release.win32\MT3.exe
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [MT3é¡¹ç›®ç¼–è¯‘é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ.md](MT3é¡¹ç›®ç¼–è¯‘é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ.md)
- [ç¬¬ä¸‰æ–¹ä¾èµ–åº“é‡æ–°ç¼–è¯‘å®Œå…¨æŒ‡å—.md](ç¬¬ä¸‰æ–¹ä¾èµ–åº“é‡æ–°ç¼–è¯‘å®Œå…¨æŒ‡å—.md)

## ğŸ“ æ”¯æŒ

å¦‚é‡åˆ°ç¼–è¯‘é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. ç¼–è¯‘æ—¥å¿—æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰
2. ç›¸å…³æ–‡æ¡£ä¸­çš„"å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"ç« èŠ‚
3. é”™è¯¯ä¿¡æ¯ä¸­çš„å…·ä½“é”™è¯¯ä»£ç 

---

**æœ€åæ›´æ–°**: 2025-10-12
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
