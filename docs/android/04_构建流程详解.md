# Android æ„å»ºæµç¨‹æŠ€æœ¯è¯¦è§£

> **ç›®æ ‡**: æ·±å…¥ç†è§£APKæ„å»ºå…¨è¿‡ç¨‹,æŒæ¡å…³é”®æŠ€æœ¯ç»†èŠ‚
> **é€‚ç”¨**: éœ€è¦æ·±åº¦å®šåˆ¶æ„å»ºæµç¨‹æˆ–æ’æŸ¥å¤æ‚é—®é¢˜çš„å¼€å‘è€…
> **åŸåˆ™**: SOLID-S(å•ä¸€èŒè´£),æ¯ä¸ªé˜¶æ®µèŒè´£æ¸…æ™°

---

## ç¬¬1ç« : æ„å»ºæµç¨‹æ¶æ„æ€»è§ˆ

### 1.1 å®Œæ•´æ„å»ºé“¾è·¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Android APK æ„å»ºå…¨æµç¨‹                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é˜¶æ®µ1: Nativeç¼–è¯‘ (NDK)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ mt3_build.bat                        â”‚
â”‚  â”œâ”€ ndk-build.cmd                    â”‚
â”‚  â”œâ”€ ç¼–è¯‘C++æºç                        â”‚
â”‚  â”œâ”€ é“¾æ¥é™æ€åº“ (libjpeg, libpngç­‰)    â”‚
â”‚  â””â”€ è¾“å‡º: libgame.so (armeabi-v7a)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
é˜¶æ®µ2: Javaç¼–è¯‘ä¸èµ„æºå¤„ç† (Ant + Android SDK)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ build.xml (Antè„šæœ¬)                  â”‚
â”‚  1) init - æ¸…ç†ä¸´æ—¶æ–‡ä»¶               â”‚
â”‚  2) copy_libs - å¤åˆ¶jarå’Œso          â”‚
â”‚  3) gen-R - aaptç”ŸæˆR.java           â”‚
â”‚  4) compile - javacç¼–è¯‘Javaä»£ç        â”‚
â”‚  5) dex - dxè½¬æ¢ä¸ºclasses.dex        â”‚
â”‚  6) package - aaptæ‰“åŒ…èµ„æº           â”‚
â”‚  7) build-unsigned-apk - ç»„è£…APK     â”‚
â”‚  8) add-subdex-toapk - æ·»åŠ å‰¯dex     â”‚
â”‚  9) sign-apk - jarsignerç­¾å         â”‚
â”‚ 10) release - è¾“å‡ºæœ€ç»ˆAPK            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
é˜¶æ®µ3: åå¤„ç†ä¸éªŒè¯ (å¯é€‰)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”œâ”€ zipalign - å¯¹é½ä¼˜åŒ–               â”‚
â”‚  â”œâ”€ apksigneréªŒè¯ (å¯é€‰)              â”‚
â”‚  â””â”€ adb install - å®‰è£…æµ‹è¯•           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 å…³é”®æ–‡ä»¶ä¸è·¯å¾„

| æ–‡ä»¶ | ç±»å‹ | ä½œç”¨ |
|------|------|------|
| [Application.mk](../../client/android/LocojoyProject/jni/Application.mk) | NDKé…ç½® | å®šä¹‰ABIã€å¹³å°ç‰ˆæœ¬ã€å·¥å…·é“¾ |
| [Android.mk](../../client/android/LocojoyProject/jni/Android.mk) | NDKæ¨¡å— | å£°æ˜æºç ã€ä¾èµ–åº“ã€ç¼–è¯‘é€‰é¡¹ |
| [mt3_build.bat](../../client/android/LocojoyProject/mt3_build.bat) | æ‰¹å¤„ç† | NDKæ„å»ºå…¥å£è„šæœ¬ |
| [build.xml](../../client/android/LocojoyProject/build.xml) | Antæ„å»º | ä¸»æ‰“åŒ…æµç¨‹(å…è´¹æœ) |
| build_monthpayment.xml(å¦‚å­˜åœ¨) | Antæ„å»º | ç‚¹å¡æœæ‰“åŒ…æµç¨‹ |
| main-dex-rule.txt(å¦‚ä½¿ç”¨) | MultiDex | ä¸»dexä¿ç•™è§„åˆ™ |
| [AndroidManifest.xml](../../client/android/LocojoyProject/AndroidManifest.xml) | æ¸…å•æ–‡ä»¶ | åº”ç”¨å…ƒæ•°æ®ã€æƒé™ã€ç»„ä»¶ |

---

## ç¬¬2ç« : NDK Nativeæ„å»ºè¯¦è§£

### 2.1 Application.mké…ç½®

**æ–‡ä»¶ä½ç½®**: `client/android/LocojoyProject/jni/Application.mk`

**å…³é”®é…ç½®**:
```makefile
APP_ABI := armeabi-v7a               # ä»…æ”¯æŒ32ä½ARM
APP_PLATFORM := android-11           # æœ€ä½API Level 11
NDK_TOOLCHAIN_VERSION := 4.9         # GCC 4.9å·¥å…·é“¾
APP_STL := gnustl_static             # ä½¿ç”¨é™æ€STLåº“
APP_CPPFLAGS += -fexceptions -frtti  # å¯ç”¨å¼‚å¸¸å’ŒRTTI
```

**é‡è¦è¯´æ˜**:
- âš ï¸ **ç¦æ­¢ä¿®æ”¹APP_ABI**ä¸ºarm64-v8a,å½“å‰é¡¹ç›®ä¸æ”¯æŒ64ä½
- APP_PLATFORMä¸AndroidManifest.xmlçš„minSdkVersionä¿æŒä¸€è‡´

### 2.2 Android.mkæ¨¡å—å®šä¹‰

**ä¸»è¦æ¨¡å—**:

1. **é¢„ç¼–è¯‘å…±äº«åº“**
```makefile
# ç™¾åº¦å®šä½SDK
include $(CLEAR_VARS)
LOCAL_MODULE := locSDK6a
LOCAL_SRC_FILES := ../../../3rdplatform/BaiduLBS_AndroidSDK_Lib/libs/$(TARGET_ARCH_ABI)/liblocSDK6a.so
include $(PREBUILT_SHARED_LIBRARY)

# DU SDK
include $(CLEAR_VARS)
LOCAL_MODULE := du
LOCAL_SRC_FILES := ../../../3rdplatform/duClient_SDK_Lib/libs/$(TARGET_ARCH_ABI)/libdu.so
include $(PREBUILT_SHARED_LIBRARY)
```

2. **æœ€ç»ˆè¾“å‡º: libgame.so**
```makefile
include $(CLEAR_VARS)
LOCAL_MODULE := game
LOCAL_SRC_FILES := æ¸¸æˆæºç .cpp ...
LOCAL_STATIC_LIBRARIES := libjpeg libpng libz
LOCAL_SHARED_LIBRARIES := locSDK6a du
include $(BUILD_SHARED_LIBRARY)
```

### 2.3 æ„å»ºè„šæœ¬: mt3_build.bat

**æ ¸å¿ƒé€»è¾‘**:
```batch
@echo off
# 1. æ¸…ç†æ—§äº§ç‰©
rd /s /q .\obj\local

# 2. æ¢æµ‹NDKè·¯å¾„
if defined NDK_HOME (ä½¿ç”¨NDK_HOME)
else if defined ANDROID_NDK_HOME (ä½¿ç”¨ANDROID_NDK_HOME)
else (ä½¿ç”¨é»˜è®¤è·¯å¾„D:\android-ndk-r10e)

# 3. æ‰§è¡Œndk-build
call %NDK_HOME%\ndk-build.cmd NDK_DEBUG=0 -j4
```

**å‚æ•°è¯´æ˜**:
- `NDK_DEBUG=0`: å‘å¸ƒç‰ˆæœ¬,ä¼˜åŒ–ç¼–è¯‘
- `-j4`: å¹¶è¡Œç¼–è¯‘,ä½¿ç”¨4ä¸ªçº¿ç¨‹

### 2.4 å¸¸è§Nativeç¼–è¯‘é”™è¯¯

| é”™è¯¯ä¿¡æ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|
| `undefined reference to jpeg_*` | é™æ€åº“ç¼ºå¤± | è¡¥å……libjpeg.aå¹¶åœ¨Android.mkä¸­é“¾æ¥ |
| `LOCAL_SRC_FILES points to missing file` | .soæ–‡ä»¶è·¯å¾„é”™è¯¯ | æ£€æŸ¥3rdplatformç›®å½•ç»“æ„ |
| `fatal error: jni.h: No such file` | NDKè·¯å¾„é”™è¯¯ | ç¡®è®¤NDK_HOMEæŒ‡å‘r10eç›®å½• |

---

## ç¬¬3ç« : Ant Javaæ‰“åŒ…è¯¦è§£

### 3.1 æ„å»ºé˜¶æ®µè¯¦è§£

#### é˜¶æ®µ1: init - åˆå§‹åŒ–
```xml
<target name="init">
    <mkdir dir="${bin}"/>
    <delete dir="${bin}/classes"/>
    <mkdir dir="${bin}/classes"/>
    <delete dir="${gen}"/>
    <mkdir dir="${gen}"/>
</target>
```

**ä½œç”¨**: æ¸…ç†å¹¶åˆ›å»ºæ„å»ºç›®å½•,é¿å…æ—§æ–‡ä»¶å¹²æ‰°

---

#### é˜¶æ®µ2: copy_libs - å¤åˆ¶ä¾èµ–
```xml
<target name="copy_libs">
    <!-- å¤åˆ¶jaræ–‡ä»¶åˆ°dexedLibs -->
    <copy todir="${dexedLibs}">
        <fileset dir="${libs}" includes="*.jar"/>
    </copy>

    <!-- ä»…å¤åˆ¶armeabi-v7açš„.soæ–‡ä»¶ -->
    <copy todir="${libs}/armeabi-v7a">
        <fileset dir="../3rdplatform/..." includes="liblocSDK6a.so"/>
        <fileset dir="../3rdplatform/..." includes="libdu.so"/>
    </copy>
</target>
```

**ä½œç”¨**: æ•´åˆç¬¬ä¸‰æ–¹åº“å’ŒNDKäº§å‡ºçš„.soæ–‡ä»¶

---

#### é˜¶æ®µ3: gen-R - ç”ŸæˆR.java
```xml
<target name="gen-R" depends="copy_libs">
    <exec executable="${tools.aapt}">
        <arg value="package"/>
        <arg value="-f"/>
        <arg value="-m"/>
        <arg value="-M"/> <arg value="${manifest}"/>
        <arg value="-S"/> <arg value="${res}"/>
        <arg value="-I"/> <arg value="${android-jar}"/>
        <arg value="-J"/> <arg value="${gen}"/>
        <arg value="--auto-add-overlay"/>
    </exec>
</target>
```

**å…³é”®å‚æ•°**:
- `-m`: ç”ŸæˆR.java
- `-M`: æŒ‡å®šAndroidManifest.xml
- `-S`: èµ„æºç›®å½•
- `-I`: android.jarè·¯å¾„
- `--auto-add-overlay`: æ”¯æŒèµ„æºè¦†ç›–

---

#### é˜¶æ®µ4: compile - Javaç¼–è¯‘
```xml
<target name="compile" depends="gen-R">
    <javac
        bootclasspath="${android-jar}"
        compiler="modern"
        source="1.7"
        target="1.7"
        destdir="${bin}/classes"
        encoding="utf-8">
        <src path="${src}"/>
        <src path="${gen}"/>
        <classpath>
            <fileset dir="${libs}" includes="*.jar"/>
        </classpath>
    </javac>
</target>
```

**å…³é”®é…ç½®**:
- `compiler="modern"`: ä½¿ç”¨å½“å‰JDKç¼–è¯‘å™¨
- `source/target="1.7"`: å…¼å®¹dxå·¥å…·(Build-Tools 22.0.1)
- `bootclasspath`: ä½¿ç”¨android.jaræ›¿ä»£æ ‡å‡†åº“

---

#### é˜¶æ®µ5: dex - ç”ŸæˆDalvikå­—èŠ‚ç 
```xml
<target name="dex" depends="compile">
    <exec executable="${tools.dx}">
        <arg value="--dex"/>
        <arg value="--multi-dex"/>
        <arg value="--main-dex-list=main-dex-list.txt"/>
        <arg value="--output=${bin}"/>
        <arg path="${bin}/classes"/>
        <arg path="${dexedLibs}/*.jar"/>
    </exec>
</target>
```

**MultiDexå…³é”®ç‚¹**:
- `--multi-dex`: ç”Ÿæˆclasses.dex, classes2.dex, ...
- `--main-dex-list`: ä¸»dexç±»åˆ—è¡¨(ä»main-dex-rule.txtç”Ÿæˆ)
- **ä½œç”¨**: è§£å†³65536æ–¹æ³•æ•°é™åˆ¶

**ä¸»dexè§„åˆ™ç¤ºä¾‹** (main-dex-rule.txt):
```
com/locojoy/mini/mt3/Mt3Application.class
com/locojoy/mini/mt3/GameApp.class
android/support/multidex/MultiDex.class
android/support/multidex/MultiDexApplication.class
```

---

#### é˜¶æ®µ6: package - æ‰“åŒ…èµ„æº
```xml
<target name="package" depends="dex">
    <exec executable="${tools.aapt}">
        <arg value="package"/>
        <arg value="-f"/>
        <arg value="-M"/> <arg value="${manifest}"/>
        <arg value="-S"/> <arg value="${res}"/>
        <arg value="-A"/> <arg value="${assets}"/>
        <arg value="-I"/> <arg value="${android-jar}"/>
        <arg value="-F"/> <arg value="${package-temp-name}"/>
    </exec>
</target>
```

**è¾“å‡º**: ä¸­é—´åŒ…(æœªå«classes.dex),åç»­æ­¥éª¤å°†dexå†™å…¥æ­¤åŒ…

---

#### é˜¶æ®µ7: build-unsigned-apk - ç»„è£…æœªç­¾åAPK
```xml
<target name="build-unsigned-apk">
    <java classname="com.android.sdklib.build.ApkBuilderMain" fork="true">
        <arg value="${unsigned-apk-path}"/>
        <arg value="-v"/>
        <arg value="-u"/>
        <arg value="-z"/> <arg value="${package-temp-name}"/>
        <arg value="-f"/> <arg value="${dex-name}"/>
        <arg value="-rf"/> <arg value="${src}"/>
        <arg value="-rj"/> <arg value="${libs}"/>
        <arg value="-nf"/> <arg value="${libs}/armeabi-v7a"/>
    </java>
</target>
```

**å‚æ•°è¯´æ˜**:
- `-z`: èµ„æºåŒ…
- `-f`: classes.dex
- `-nf`: nativeåº“ç›®å½•(.soæ–‡ä»¶)

---

#### é˜¶æ®µ8: add-subdex-toapk - æ·»åŠ å‰¯dex
```xml
<target name="add-subdex-toapk">
    <exec executable="${tools.aapt}">
        <arg value="add"/>
        <arg value="-v"/>
        <arg value="${unsigned-apk-path}"/>
        <arg value="classes2.dex"/>
        <arg value="classes3.dex"/>
        <!-- ... æ›´å¤šdexæ–‡ä»¶ -->
    </exec>
</target>
```

**ä½œç”¨**: å°†classes2.dexç­‰è¿½åŠ åˆ°APK

---

#### é˜¶æ®µ9: sign-apk - ç­¾å
```xml
<target name="sign-apk">
    <exec executable="${tools.jarsigner}">
        <arg value="-verbose"/>
        <arg value="-keystore"/> <arg value="${keystore-name}"/>
        <arg value="-storepass"/> <arg value="${keystore-password}"/>
        <arg value="-keypass"/> <arg value="${key-password}"/>
        <arg value="-signedjar"/> <arg value="${signed-apk-path}"/>
        <arg value="${unsigned-apk-path}"/>
        <arg value="${keystore-alias}"/>
    </exec>
</target>
```

**å®‰å…¨æç¤º**:
- âš ï¸ ç”Ÿäº§ç¯å¢ƒå‹¿åœ¨è„šæœ¬ä¸­ç¡¬ç¼–ç å¯†ç 
- âœ… ä½¿ç”¨`-Dkeystore-password=***`ä»å‘½ä»¤è¡Œä¼ å…¥

---

#### é˜¶æ®µ10: release - è¾“å‡ºæœ€ç»ˆAPK
```xml
<target name="release" depends="sign-apk">
    <copy file="${signed-apk-path}" todir="${bin}"/>
    <delete file="${unsigned-apk-path}"/>
    <delete file="${package-temp-name}"/>
</target>
```

**äº§ç‰©**: `build/bin/mt3_locojoy.apk`

---

### 3.2 å·¥ç¨‹é…ç½®è¦ç‚¹

#### ä»…æ”¯æŒarmeabi-v7a

**build.xmlä¸­çš„ABIè¿‡æ»¤**:
```xml
<copy todir="${libs}/armeabi-v7a">
    <!-- ä»…å¤åˆ¶v7açš„.soæ–‡ä»¶ -->
    <fileset dir="../../../3rdplatform/BaiduLBS_AndroidSDK_Lib/libs/armeabi-v7a" includes="*.so"/>
</copy>

<!-- åˆ é™¤å…¶ä»–ABIç›®å½•(å¦‚æœè¯¯åˆ›å»º) -->
<delete dir="${libs}/arm64-v8a"/>
<delete dir="${libs}/x86"/>
<delete dir="${libs}/x86_64"/>
```

#### MultiDexé…ç½®

**Applicationåˆå§‹åŒ–**:
```java
// Mt3Application.java
@Override
protected void attachBaseContext(Context base) {
    super.attachBaseContext(base);
    MultiDex.install(this);  // å®‰è£…å‰¯dex
}
```

**æ¸…å•æ–‡ä»¶é…ç½®**:
```xml
<application
    android:name=".Mt3Application"
    android:minSdkVersion="11"
    android:targetSdkVersion="17">
    ...
</application>
```

---

## ç¬¬4ç« : æŠ€æœ¯è§„èŒƒä¸æœ€ä½³å®è·µ

### 4.1 ç¼–è¯‘å™¨é…ç½®è§„èŒƒ

**æ ‡å‡†é…ç½®**(å·²åœ¨build.xmlä¸­ä¿®æ­£):
```xml
<javac
    compiler="modern"    <!-- ä½¿ç”¨å½“å‰JDK,è€Œéjavac1.7/javac1.8 -->
    source="1.7"         <!-- æºç å…¼å®¹Java 7 -->
    target="1.7"         <!-- ç›®æ ‡å­—èŠ‚ç Java 7 -->
    bootclasspath="${android-jar}">  <!-- ä½¿ç”¨Android API -->
</javac>
```

**åŸå› **: dxå·¥å…·(Build-Tools 22.0.1)ä¸å®Œå…¨æ”¯æŒJava 8å­—èŠ‚ç 

---

### 4.2 ç­¾åç®¡ç†è§„èŒƒ

**å¼€å‘ç¯å¢ƒ**:
```xml
<property name="keystore-name" value="mt3.keystore"/>
<property name="keystore-password" value="debug123"/>  <!-- ä»…ç¤ºä¾‹ -->
<property name="keystore-alias" value="mt3"/>
```

**ç”Ÿäº§ç¯å¢ƒ**:
```cmd
# ä»å¤–éƒ¨ä¼ å…¥å¯†ç ,é¿å…ç¡¬ç¼–ç 
ant -Dkeystore-password=$PROD_PASSWORD -Dkey-password=$KEY_PASSWORD release
```

---

### 4.3 èµ„æºé…ç½®ç®¡ç†

**ç‰ˆæœ¬ä¿¡æ¯** (strings.xml):
```xml
<string name="mt3_update_url">http://update.server.com/</string>
<string name="mt3_verfile_name">ver.json</string>
```

**æ¸ é“é…ç½®** (assets/ljsdk.cfg):
```json
{
  "channel": "locojoy",
  "login_verify_url": "http://api.server.com/verify",
  "pay_request_url": "http://api.server.com/pay"
}
```

---

### 4.4 ç›®å½•ç»“æ„è§„èŒƒ

```
client/android/LocojoyProject/
â”œâ”€â”€ jni/                    # NDKæºç å’Œé…ç½®
â”‚   â”œâ”€â”€ Application.mk
â”‚   â””â”€â”€ Android.mk
â”œâ”€â”€ src/                    # Javaæºç 
â”‚   â””â”€â”€ com/locojoy/mini/mt3/
â”œâ”€â”€ res/                    # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ layout/
â”‚   â”œâ”€â”€ values/
â”‚   â””â”€â”€ drawable/
â”œâ”€â”€ assets/                 # èµ„äº§æ–‡ä»¶
â”‚   â””â”€â”€ ljsdk.cfg
â”œâ”€â”€ libs/                   # ç¬¬ä¸‰æ–¹åº“
â”‚   â”œâ”€â”€ armeabi-v7a/       # ä»…æ­¤ABI
â”‚   â””â”€â”€ *.jar
â”œâ”€â”€ build/                  # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ build.xml
â”‚   â”œâ”€â”€ main-dex-rule.txt
â”‚   â””â”€â”€ mt3.keystore
â””â”€â”€ AndroidManifest.xml
```

---

## ç¬¬5ç« : å¸¸è§æ„å»ºé—®é¢˜

### 5.1 aaptæŠ¥é”™: "duplicate resources"

**åŸå› **: å¤šä¸ªresç›®å½•å­˜åœ¨åŒåèµ„æº

**è§£å†³**:
1. æ£€æŸ¥overlayé…ç½®æ˜¯å¦æ­£ç¡®
2. åˆ é™¤é‡å¤èµ„æºæˆ–ä½¿ç”¨`--auto-add-overlay`

---

### 5.2 dxæŠ¥é”™: "method ID not in [0, 0xffff]: 65536"

**åŸå› **: æ–¹æ³•æ•°è¶…è¿‡65536é™åˆ¶

**è§£å†³**:
1. ç¡®è®¤ä½¿ç”¨MultiDexæ„å»ºè„šæœ¬
2. æ£€æŸ¥main-dex-rule.txtåŒ…å«å…³é”®ç±»

---

### 5.3 jarsigneræŠ¥é”™: "unable to sign jar"

**åŸå› **: keystoreè·¯å¾„é”™è¯¯æˆ–å¯†ç ä¸æ­£ç¡®

**è§£å†³**:
```cmd
# éªŒè¯keystore
keytool -list -v -keystore build/mt3.keystore

# æ£€æŸ¥alias
keytool -list -keystore build/mt3.keystore
```

---

### 5.4 å®‰è£…åå¯åŠ¨é—ªé€€

**åŸå› **: ä¸»dexç¼ºå°‘å…³é”®ç±»

**è¯Šæ–­**:
```cmd
# æŠ“å–logcat
adb logcat -d | findstr ClassNotFoundException
```

**è§£å†³**: è¡¥å……ç±»åˆ°main-dex-rule.txt

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- ç¯å¢ƒå‡†å¤‡: [03_ç¯å¢ƒé…ç½®æŒ‡å—.md](03_ç¯å¢ƒé…ç½®æŒ‡å—.md)
- å¿«é€Ÿå¼€å§‹: [01_å¿«é€Ÿå¼€å§‹.md](01_å¿«é€Ÿå¼€å§‹.md)
- é—®é¢˜è¯Šæ–­: [05_é—®é¢˜è¯Šæ–­å†³ç­–æ ‘.md](05_é—®é¢˜è¯Šæ–­å†³ç­–æ ‘.md)
- å®Œæ•´æ’é”™: [06_å®Œæ•´æ’é”™æ‰‹å†Œ.md](06_å®Œæ•´æ’é”™æ‰‹å†Œ.md)

---

**æœ€åæ›´æ–°**: 2025-10-17
**ç»´æŠ¤è€…**: MT3é¡¹ç›®ç»„
**ç‰ˆæœ¬**: v2.0 (æ•´åˆè‡ªv1.0æµç¨‹æ€»è§ˆå’Œæ“ä½œè§„èŒƒæ–‡æ¡£)
